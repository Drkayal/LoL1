# ๐ ุชุฑููุฉ Docker - Docker Upgrade Guide

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุชุญุฏูุซ ูุธุงู ูุตูุน ุงูุจูุชุงุช ููุฏุนู ุชุดุบูู ุงูุจูุชุงุช ูู ุญุงููุงุช Docker ูุน ุขููุฉ ุงุญุชูุงุทูุฉ ููุชุดุบูู ุงููุจุงุดุฑ.

## ๐ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. **ุนุฒู ุงูุจูุฆุงุช ุจุงุณุชุฎุฏุงู Docker**
- ูู ุจูุช ููุดุฃ ูุนูู ูู ุญุงููุฉ Docker ูููุตูุฉ
- ุนุฒู ูุงูู ููููุงุฑุฏ ูุงูุจูุฆุงุช
- ุฅุฏุงุฑุฉ ุฃุณูู ููุญุงููุงุช

### 2. **ุขููุฉ ุงุญุชูุงุทูุฉ ููุชุดุบูู ุงููุจุงุดุฑ**
- ุฅุฐุง ูู ููู Docker ูุชุงุญุงูุ ูุชู ุงูุชุดุบูู ูุจุงุดุฑุฉ ูู ุงููุธุงู
- ุชูุงูู ูุงูู ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ
- ูุง ุญุงุฌุฉ ูุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ

### 3. **ุฅุฏุงุฑุฉ ูุญุณูุฉ ููุจูุชุงุช**
- ุฏุนู ููุง ุงูููุนูู: ุญุงููุงุช Docker ูุงูุนูููุงุช ุงููุจุงุดุฑุฉ
- ุนุฑุถ ููุน ุงูุชุดุบูู ูู ูุงุฆูุฉ ุงูุจูุชุงุช ุงููุดุชุบูุฉ
- ุฅููุงู ุฐูู ุญุณุจ ููุน ุงูุชุดุบูู

## ๐ง ููููุฉ ุงูุนูู

### **ุงูุชุดุบูู ุงูุชููุงุฆู:**
1. **ุงูุชุญูู ูู Docker**: ุงููุธุงู ูุชุญูู ูู ูุฌูุฏ Docker ุฃููุงู
2. **ุฅุฐุง ูุงู Docker ูุชุงุญุงู**: ูุชู ุจูุงุก ุตูุฑุฉ Docker ูุชุดุบูู ุงูุจูุช ูู ุญุงููุฉ
3. **ุฅุฐุง ูู ููู Docker ูุชุงุญุงู**: ูุชู ุงูุชุดุบูู ูุจุงุดุฑุฉ ุจุงุณุชุฎุฏุงู Python

### **ุฅุฏุงุฑุฉ ุงูุจูุชุงุช:**
- **Container ID**: ููุญุงููุงุช (ูุซุงู: `abc123def456`)
- **PID**: ููุนูููุงุช ุงููุจุงุดุฑุฉ (ูุซุงู: `12345`)

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### **`bots/logic.py`**
- `start_bot_process()`: ุฏุนู ููุง ุงูููุนูู
- `_start_bot_in_docker()`: ุชุดุบูู ูู Docker
- `_start_bot_directly()`: ุชุดุบูู ูุจุงุดุฑ
- `stop_bot_process()`: ุฅููุงู ุฐูู

### **`bots/models.py`**
- `get_running_bots()`: ุงูุชุญูู ูู ููุง ุงูููุนูู
- `save_bot_info()`: ุฏุนู container_id

### **`handlers/commands.py`**
- ุนุฑุถ ููุน ุงูุชุดุบูู ูู ูุงุฆูุฉ ุงูุจูุชุงุช
- ุฅููุงู ุฐูู ุญุณุจ ุงูููุน

## ๐๏ธ ุงูุฃูุงูุฑ ุงูุฌุฏูุฏุฉ

### **ุฅุฏุงุฑุฉ Docker:**
```bash
# ุจูุงุก ุตูุฑ ุฌููุน ุงูุจูุชุงุช
make docker-bots-build

# ุชุดุบูู ุฌููุน ุงูุจูุชุงุช
make docker-bots-start

# ุฅููุงู ุฌููุน ุงูุจูุชุงุช
make docker-bots-stop

# ุนุฑุถ ุงูุญุงููุงุช ุงููุดุชุบูุฉ
make docker-bots-list

# ุชูุธูู ุงูุญุงููุงุช
make docker-bots-clean

# ุนุฑุถ ุณุฌูุงุช ุจูุช ูุญุฏุฏ
make docker-bots-logs CONTAINER=<container_id>
```

### **ุณูุฑูุจุช ุงูุฅุฏุงุฑุฉ:**
```bash
# ุจูุงุก ุฌููุน ุงูุตูุฑ
python scripts/manage_bots.py build-all

# ุชุดุบูู ุฌููุน ุงูุจูุชุงุช
python scripts/manage_bots.py start-all

# ุฅููุงู ุฌููุน ุงูุจูุชุงุช
python scripts/manage_bots.py stop-all

# ุนุฑุถ ุงูุญุงููุงุช
python scripts/manage_bots.py list

# ุชูุธูู
python scripts/manage_bots.py clean
```

## ๐ ูุฑุงูุจุฉ ุงูุจูุชุงุช

### **ูู ูุงุฌูุฉ ุงูุจูุช:**
```
๐ข ุงูุจูุชุงุช ุงููุดุชุบูุฉ:

1. @mybot1
   ๐ณ ุงูุญุงููุฉ: `abc123def456...`

2. @mybot2
   ๐ง ุงูุนูููุฉ: `PID 12345`

3. @mybot3
   โ๏ธ ูุนุฑู ุบูุฑ ูุญุฏุฏ
```

### **ูู ุงูุณุฌูุงุช:**
```
INFO: Started bot mybot1 in Docker container: abc123def456
INFO: Started bot mybot2 directly with PID: 12345
INFO: Docker not available, falling back to direct execution
```

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

### **ูุชุทูุจุงุช Docker:**
```bash
# ุชุซุจูุช Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# ุฅุถุงูุฉ ุงููุณุชุฎุฏู ููุฌููุนุฉ docker
sudo usermod -aG docker $USER
```

### **ูุชุบูุฑุงุช ุงูุจูุฆุฉ:**
```bash
# ูู ููู .env
DOCKER_ENABLED=true  # ุชูุนูู Docker (ุงุฎุชูุงุฑู)
DOCKER_NETWORK=host  # ููุน ุงูุดุจูุฉ
```

## ๐ ุงูุชุฑููุฉ ูู ุงูุฅุตุฏุงุฏ ุงูุณุงุจู

### **ูุง ุชูุฌุฏ ุชุบููุฑุงุช ูุทููุจุฉ:**
- ุงููุธุงู ูุนูู ุชููุงุฆูุงู ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ
- ุงูุจูุชุงุช ุงูููุฌูุฏุฉ ุชุณุชูุฑ ูู ุงูุนูู
- ูุง ุญุงุฌุฉ ูุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **ูุชูุนูู Docker:**
1. ุชุซุจูุช Docker
2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุชุงุช
3. ุงูุจูุชุงุช ุงูุฌุฏูุฏุฉ ุณุชุณุชุฎุฏู Docker ุชููุงุฆูุงู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### **ูุดุงูู Docker:**
```bash
# ุงูุชุญูู ูู ุญุงูุฉ Docker
docker --version
docker ps

# ุฅุนุงุฏุฉ ุชุดุบูู Docker
sudo systemctl restart docker
```

### **ูุดุงูู ุงูุจูุชุงุช:**
```bash
# ุนุฑุถ ุณุฌูุงุช ุงูุจูุช
make docker-bots-logs CONTAINER=<container_id>

# ุฅุนุงุฏุฉ ุจูุงุก ุงูุตูุฑ
make docker-bots-build

# ุชูุธูู ุงูุญุงููุงุช
make docker-bots-clean
```

### **ุงูุนูุฏุฉ ููุชุดุบูู ุงููุจุงุดุฑ:**
```bash
# ุฅููุงู Docker
sudo systemctl stop docker

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุชุงุช
# ุณุชุณุชุฎุฏู ุงูุชุดุบูู ุงููุจุงุดุฑ ุชููุงุฆูุงู
```

## ๐ ุงูููุงุฑูุฉ

| ุงูููุฒุฉ | Docker | ุงูุชุดุบูู ุงููุจุงุดุฑ |
|--------|--------|-----------------|
| ุงูุนุฒู | โ ูุงูู | โ ูุญุฏูุฏ |
| ุงูุฅุฏุงุฑุฉ | โ ุณููุฉ | โ๏ธ ูุชูุณุทุฉ |
| ุงูุฃุฏุงุก | โ ูุญุณู | โ๏ธ ุนุงุฏู |
| ุงูุชูุงูู | โ๏ธ ูุญุชุงุฌ Docker | โ ูุงูู |
| ุงูููุงุฑุฏ | โ ูุญุณูุฉ | โ ูุดุชุฑูุฉ |

## ๐ฏ ุงูุชูุตูุงุช

### **ููุฅูุชุงุฌ:**
- ุงุณุชุฎุฏู Docker ููุญุตูู ุนูู ุฃูุถู ุนุฒู ูุฃุฏุงุก
- ูู ุจุฅุนุฏุงุฏ ูุฑุงูุจุฉ ููุญุงููุงุช
- ุงุณุชุฎุฏู docker-compose ููุฅุฏุงุฑุฉ

### **ููุชุทููุฑ:**
- ูููู ุงุณุชุฎุฏุงู ุงูุชุดุบูู ุงููุจุงุดุฑ ููุณุฑุนุฉ
- Docker ูููุฏ ูุงุฎุชุจุงุฑ ุงูุจูุฆุงุช ุงููุฎุชููุฉ

### **ููุงุฎุชุจุงุฑ:**
- ุฌุฑุจ ููุง ุงูููุนูู
- ูุงุฑู ุงูุฃุฏุงุก ูุงูุงุณุชูุฑุงุฑ
- ุงุฎุชุฑ ุงูุฃูุณุจ ูุงุญุชูุงุฌุงุชู

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุฑุงุฌุน ุณุฌูุงุช ุงูุจูุช
2. ุชุญูู ูู ุญุงูุฉ Docker
3. ุฌุฑุจ ุงูุชุดุบูู ุงููุจุงุดุฑ
4. ุฑุงุฌุน ูุฐุง ุงูุฏููู

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ ูุฑูู ูุตูุน ุงูุจูุชุงุช** ๐