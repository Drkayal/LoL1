# Handlers Module - مجلد المعالجات

هذا المجلد يحتوي على جميع معالجات الأوامر والرسائل في البوت.

## الملفات

### `__init__.py`
ملف تهيئة المجلد الذي يعرض جميع المعالجات المتاحة.

### `commands.py`
يحتوي على معالجات الأوامر:

#### معالجات الأوامر الأساسية
- **cmd_handler()**: معالج الأوامر الرئيسية والرسائل النصية
- **new_user_handler()**: معالج المستخدمين الجدد
- **admins_handler()**: معالج المدراء
- **user_count_callback_handler()**: معالج إحصائيات المستخدمين

#### معالجات معلومات النظام
- **alivehi_handler()**: معالج أمر السورس
- **you_handler()**: معالج أمر مطور السورس

#### معالجات إدارة المطورين
- **add_dev_handler()**: معالج رفع مطور
- **remove_dev_handler()**: معالج تنزيل مطور
- **list_devs_handler()**: معالج قائمة المطورين

#### معالجات إدارة المصنع
- **onoff_handler()**: معالج فتح/قفل المصنع
- **maked_handler()**: معالج صنع بوت
- **deletbot_handler()**: معالج حذف بوت
- **botat_handler()**: معالج قائمة البوتات المصنوعة
- **kinhsker_handler()**: معالج الاسكرينات المفتوحة
- **update_factory_handler()**: معالج تحديث الصانع

#### معالجات إدارة البوتات
- **stop_specific_bot_handler()**: معالج إيقاف بوت محدد
- **show_running_bots_handler()**: معالج عرض البوتات المشتغلة
- **start_Allusers_handler()**: معالج تشغيل جميع البوتات
- **stooop_Allusers_handler()**: معالج إيقاف جميع البوتات

### `broadcast.py`
يحتوي على معالجات البث:

#### معالجات البث
- **forbroacasts_handler()**: معالج البث والرسائل الجماعية

### `admin.py`
يحتوي على معالجات الإدارة (سيتم إضافة الدوال في المستقبل):
- معالجات التحكم المتقدمة
- إدارة النظام
- دوال أخرى متعلقة بالإدارة

## الاستخدام

```python
# استيراد المعالجات المطلوبة
from handlers import (
    cmd_handler,
    new_user_handler,
    add_dev_handler,
    forbroacasts_handler
)

# المعالجات تعمل تلقائياً عند استيرادها
# لا حاجة لاستدعائها يدوياً
```

## المميزات

1. **فصل واضح**: فصل معالجات الأوامر عن معالجات البث والإدارة
2. **إدارة التبعيات**: نظام إدارة التبعيات لتمرير المتغيرات المطلوبة
3. **التوثيق الشامل**: تعليقات مفصلة لكل معالج
4. **إدارة الأخطاء**: معالجة شاملة للأخطاء مع تسجيل مفصل
5. **قابلية التوسع**: إمكانية إضافة معالجات جديدة بسهولة
6. **التحقق من الصلاحيات**: تحقق من صلاحيات المستخدمين قبل تنفيذ الأوامر
7. **التفاعل مع قاعدة البيانات**: استخدام دوال قاعدة البيانات المعيارية
8. **إدارة العمليات**: تشغيل وإيقاف البوتات بشكل آمن

## التبعيات

### المتغيرات المطلوبة
- **OWNER_ID**: معرف المالك
- **bots_collection**: مجموعة البوتات في قاعدة البيانات

### الدوال المطلوبة
- دوال التحقق من المستخدمين (`is_dev`, `is_user`)
- دوال إدارة البوتات (`start_bot_process`, `stop_bot_process`)
- دوال قاعدة البيانات (`get_bot_info`, `save_bot_info`)
- دوال البث (`set_broadcast_status`, `delete_broadcast_status`)
- دوال المصنع (`get_factory_state`, `set_factory_state`)

## إعداد التبعيات

```python
# تعيين التبعيات لمعالجات الأوامر
from handlers.commands import set_dependencies as set_commands_dependencies
from handlers.broadcast import set_dependencies as set_broadcast_dependencies

set_commands_dependencies(OWNER_ID, bots_collection)
set_broadcast_dependencies(bots_collection)
```

## الأمان

- جميع المعالجات تتحقق من صلاحيات المستخدم قبل التنفيذ
- استخدام دوال التحقق من المدخلات
- معالجة شاملة للأخطاء
- تسجيل جميع العمليات المهمة